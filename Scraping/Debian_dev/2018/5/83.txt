To : Debian devel <debian-devel@lists.debian.org>
Subject : Re: Dealing with ci.d.n for package regressions
From : Paul Gevers <elbrus@debian.org>
Date : Sun, 6 May 2018 19:57:37 +0200
Message-id : 0d816679-8968-7188-92bc-b55224dc4155@debian.org
In-reply-to : <[ðŸ”Ž]Â 23276.16175.213346.230965@chiark.greenend.org.uk>
References : <[ðŸ”Ž]Â e83b1d1c-477b-2ee4-3bc2-86a30748fd7d@debian.org> <[ðŸ”Ž]Â 23274.64703.262783.215659@chiark.greenend.org.uk> <[ðŸ”Ž]Â 91ffa9ba-b546-55f5-9ca0-33cb47a697a1@debian.org> <[ðŸ”Ž]Â 23276.15084.748760.107356@chiark.greenend.org.uk> <[ðŸ”Ž]Â 23276.16175.213346.230965@chiark.greenend.org.uk>


Hi Ian,
On 04-05-18 13:08, Ian Jackson wrote:
> Ian Jackson writes ("Re: Dealing with ci.d.n for package regressions"):
>> I hadn't realissed that _test_ dependencies would trigger retests, as
>> well as actual package dependencies.
> 
> Having read Mattia's message, and looking at the Testsuite-Triggers
> line which is autogenerated in dgit.dsc, I see that actual package
> dependencies are not included.
> 
> That seems wrong to me.  foo/debian/tests/control will normally
> declare a dependency on foo (perhaps by saying `@'); it then won't
> normally mention all of foo's dependencies.
I am not 100% sure (I would have to find the old discussion of before my
involvement), but I think the reason is that the normal triggers are
otherwise available to britney. So this field (as $(man dsc) says) only
stores the TEST dependencies.
> The result of the current behaviour is that regressions introduced by
> test framework code are more likely to be detected than regressions
> introduced by ordinary dependencies.
I don't think so, but let me look up the code:
https://salsa.debian.org/release-team/britney2/blob/master/britney2/policies/autopkgtest.py
(line 354 to 446 at commit e51a3b91)
Starting at line 413 britney adds the reverse dependencies of the
package under consideration.
Paul
signature.asc