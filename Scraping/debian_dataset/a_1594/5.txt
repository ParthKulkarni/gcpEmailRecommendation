To : Paul Gevers <elbrus@debian.org>, 882723@bugs.debian.org
Subject : Re: Bug#882723: src:keepassxc: Generated file without preferred form of source: src/zxcvbn/dict-src.h
From : Julian Andres Klode <jak@debian.org>
Date : Sun, 26 Nov 2017 12:55:40 +0100
Message-id : 20171126120741.GA16115@debian.org
Mail-followup-to : Julian Andres Klode <jak@debian.org>,	Paul Gevers <elbrus@debian.org>, 882723@bugs.debian.org,	Debian devel <debian-devel@lists.debian.org>
In-reply-to : <[ðŸ”Ž]Â 54f3f0d8-4b93-993b-e38f-9bf661397155@debian.org>
References : <[ðŸ”Ž]Â 20171126012639.GA26212@debian.org> <[ðŸ”Ž]Â 20171126012639.GA26212@debian.org> <[ðŸ”Ž]Â 54f3f0d8-4b93-993b-e38f-9bf661397155@debian.org>


On Sun, Nov 26, 2017 at 07:45:13AM +0100, Paul Gevers wrote:
> Hi Julian,
> 
> On 26-11-17 01:29, Julian Andres Klode wrote:
> > The file src/zxcvbn/dict-src.h is an autogenerated dictionary file,
> > generated from smaller files. The directory is removed during build.
> 
> Are you saying that these smaller files are in the tar ball, but after
> one build the files are gone? That would mean you have a problem to
> build twice in a row.
That's wrong. You can always remove files, removals are ignored
when building the tarball. That's how dh-autoreconf works.
> > I'm not entirely sure if I need to repackage the source tarball or
> > not, given that the file is removed during clean, hence the bug
> > report and CCing debian-devel.
> 
> I would copy the directory to some tmp folder in debian/ during the
> configure step (if not done before) and move it back during the clean
> step (and copy it from debian/ in the step where you are building
> src/zxcvbn/dict-src.h).
> 
> I don't see any issue, except you should ask upstream to fix the
> situation. Repacking the source tarball for this feels wrong, except if
> you need to do that for other reasons as well.
I'd say that's reasonable, yes.
-- 
debian developer - deb.li/jak | jak-linux.org - free software dev
ubuntu core developer                              i speak de, en