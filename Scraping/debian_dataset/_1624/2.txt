To : Ian Campbell <ijc@debian.org>, Per Lundberg <perlun@gmail.com>
Subject : Re: Bug#915880: lvm2: Dependency on liblz4-1 causes /sbin binaries to depend on /usr/lib libraries
From : Ben Hutchings <ben@decadent.org.uk>
Date : Thu, 13 Dec 2018 01:02:12 +0000
Message-id : 9faab2925445d7a21ddbd321da08b0a9ed66ee76.camel@decadent.org.uk
In-reply-to : <[ðŸ”Ž]Â 15d199f817bc68a935a53c8c06dc7b111ca46c1a.camel@debian.org>
References : 	<154419434929.12986.7173843530076061777.reportbug@alladin.hibox.local>	 <20181209095059.GA7215@localhost>	 <[ðŸ”Ž]Â CAMevFkK=HTD3AWHyXE_uwAoF6vD6sBWKHPo_xa2bNMoY6XR=ww@mail.gmail.com>	 <[ðŸ”Ž]Â 395b76250352fd915f32e79d58c7d1c05784a666.camel@debian.org>	 <[ðŸ”Ž]Â CAMevFk+dN4=kDi+902XBCP1bSSMxhZnmxh2iJfPfS+spijx8qw@mail.gmail.com>	 <[ðŸ”Ž]Â 15d199f817bc68a935a53c8c06dc7b111ca46c1a.camel@debian.org>


On Wed, 2018-12-12 at 07:09 +0000, Ian Campbell wrote:
> On Wed, 2018-12-12 at 09:04 +0200, Per Lundberg wrote:
> > Let's leave this closed for now; I might come back later but I'd need
> > to investigate this more on a clean Ubuntu 18.04 install and
> > potentially open an issue with them. Given the usrmerge coming up, the
> > difference between depending on /lib and /usr/lib might be irrelevant
> > shortly, as far as Debian is concerned.
> 
> Remember that usrmerge is going to move stuff from /sbin to /usr/sbin
> etc not vice versa, so without /usr mounted from the initramfs you
> won't find /sbin/lvm at all i.e. the issue is more pronounced with
> usrmerge, not less.
> 
> BTW the initramfs's generated by the tools in Debian have been
> usrmerged for a long time, and it should be those copies of LVM and its
> dependencies which are being used anyway.
initramfs-tools has generated usr-merged filesystems since 0.132, but
that was only uploaded in July and hasn't made it into Ubuntu yet.
But it has been mounting /usr where necessary since Debian 8 "jessie"
and Ubuntu 15.10 (I think).
Ben.
-- 
Ben Hutchings
If more than one person is responsible for a bug, no one is at fault.
signature.asc