To : Ben Hutchings <ben@decadent.org.uk>
Subject : Re: Armel: Debian installer freeezes (GuruPlug Server plus)
From : Kari Tanninen <otmen@elisanet.fi>
Date : Sun, 04 Mar 2018 15:11:08 +0200
Message-id : fd7cc0f86df13e9bfe661cffb0c24884@be508.mail.saunalahti.fi
In-reply-to : <[ðŸ”Ž]Â 1520086417.2617.361.camel@decadent.org.uk>
References : <[ðŸ”Ž]Â 7d2b5cd2b76322278749f6358709f811@be508.mail.saunalahti.fi> <[ðŸ”Ž]Â 20180301120245.una45cavlishaa6m@jirafa.cyrius.com> <[ðŸ”Ž]Â 832324d77e6d817c2046c5d76e3b0602@be508.mail.saunalahti.fi> <[ðŸ”Ž]Â 20180301131149.25oatx7jtqpwiovj@jirafa.cyrius.com> <[ðŸ”Ž]Â 298158712aa54715db184771cffdac93@be508.mail.saunalahti.fi> <[ðŸ”Ž]Â 1520086417.2617.361.camel@decadent.org.uk>


Ben wrote:
"This behaviour is configurable.  For armel and armhf we enable
CONFIG_ARM_ATAG_DTB_COMPAT and
CONFIG_ARM_ATAG_DTB_COMPAT_CMDLINE_FROM_BOOTLOADER so that ATAG
variables override the DTB"
That is obvious cause of these uInitrd relocation problems.
I don't exactly know how U-boot passes ATAG-values to kernel but in 
multiprocessing environment it is very difficult task anyway
(and there is even BareBox forked from U-boot for non-flexible attitude 
of U-boot for these kernel/bootloader API issues).
ARM MMU/multiprocessing environment is straightforward, but very 
complex. I found GuruPlug PXA168 SoC specifications, but there is 
thousands of
pages of information and it is very difficult to guess how kernel/U-boot 
uses it. Linux kernel is expecting very complete setup on boot,
I think that BareBox approach is not very healthy either, there is some 
odd features to use FDT, too. Keeping up two versions of FDT, for 
example.
Best way to do it with Linux -kernel is to use one FDT-blob generated by 
kconfig at kernel compile and load it by bootloader. At Kernel API point 
of view
that should be same situation as PC and command line parameters and 
other boot-time variables is supplied by bootloader by modifying 
FDT-blob